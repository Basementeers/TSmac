//! Defines how Tarmac generates Lua code for linking to assets.
//!
//! Tarmac uses structs with `Display` impls to build up templates.

use std::fmt;

const CODEGEN_HEADER: &str =
    "-- This file was @generated by Tarmac. It is not intended for manual editing.";

/// Codegen template for CodegenKind::AssetUrl
pub(crate) struct AssetUrlTemplate {
    pub id: u64,
}

impl fmt::Display for AssetUrlTemplate {
    fn fmt(&self, formatter: &mut fmt::Formatter) -> fmt::Result {
        writeln!(formatter, "{}", CODEGEN_HEADER)?;
        writeln!(formatter, "return \"rbxassetid://{}\"", self.id)?;

        Ok(())
    }
}
